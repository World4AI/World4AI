import{S as y,i as x,s as ee,a as G,y as W,e as P,c as M,z,b as D,A as N,g as $,v as E,d,f as H,h as C,B as A,P as re,a8 as fe,a7 as oe,Q as ae,R as ie,m as se,n as Q,M as R}from"./index.4d92b023.js";import{S as me}from"./SvgContainer.f70b5745.js";import{B as q}from"./Block.059eddcd.js";import{A as te}from"./Arrow.ae91874c.js";function j(r,t,f){const n=r.slice();return n[5]=t[f],n}function I(r){let t,f;return t=new te({props:{data:[{x:k+p/2+r[2]*w,y:b+(r[1]-1)*u+u/2+B/2},{x:k+p/2+r[3]*w,y:b+r[1]*u-p}],strokeWidth:2,showMarker:!1,dashed:!0,strokeDashArray:"8 8"}}),{c(){W(t.$$.fragment)},l(n){z(t.$$.fragment,n)},m(n,o){N(t,n,o),f=!0},p(n,o){const l={};o&14&&(l.data=[{x:k+p/2+n[2]*w,y:b+(n[1]-1)*u+u/2+B/2},{x:k+p/2+n[3]*w,y:b+n[1]*u-p}]),t.$set(l)},i(n){f||($(t.$$.fragment,n),f=!0)},o(n){d(t.$$.fragment,n),f=!1},d(n){A(t,n)}}}function J(r){let t,f,n,o;return t=new q({props:{x:k+p/2+r[3]*w,y:b+r[1]*u+u/2,width:r[0]._op==="sigmoid"?B*3:B,height:B,text:r[0]._op,fontSize:20,color:"var(--main-color-3)"}}),n=new te({props:{data:[{x:k+p/2+r[3]*w,y:b+r[1]*u+p/2},{x:k+p/2+r[3]*w,y:b+r[1]*u+u/2-B/2}],strokeWidth:2,showMarker:!1,dashed:!0,strokeDashArray:"8 8"}}),{c(){W(t.$$.fragment),f=G(),W(n.$$.fragment)},l(l){z(t.$$.fragment,l),f=M(l),z(n.$$.fragment,l)},m(l,i){N(t,l,i),D(l,f,i),N(n,l,i),o=!0},p(l,i){const s={};i&8&&(s.x=k+p/2+l[3]*w),i&2&&(s.y=b+l[1]*u+u/2),i&1&&(s.width=l[0]._op==="sigmoid"?B*3:B),i&1&&(s.text=l[0]._op),t.$set(s);const g={};i&10&&(g.data=[{x:k+p/2+l[3]*w,y:b+l[1]*u+p/2},{x:k+p/2+l[3]*w,y:b+l[1]*u+u/2-B/2}]),n.$set(g)},i(l){o||($(t.$$.fragment,l),$(n.$$.fragment,l),o=!0)},o(l){d(t.$$.fragment,l),d(n.$$.fragment,l),o=!1},d(l){A(t,l),l&&C(f),A(n,l)}}}function K(r){let t,f;return t=new ne({props:{root:r[5],level:r[1]+1,parentColumn:r[3]}}),{c(){W(t.$$.fragment)},l(n){z(t.$$.fragment,n)},m(n,o){N(t,n,o),f=!0},p(n,o){const l={};o&1&&(l.root=n[5]),o&2&&(l.level=n[1]+1),o&8&&(l.parentColumn=n[3]),t.$set(l)},i(n){f||($(t.$$.fragment,n),f=!0)},o(n){d(t.$$.fragment,n),f=!1},d(n){A(t,n)}}}function ue(r){let t,f,n,o,l,i,s,g,v,X,h=r[1]!==0&&I(r);f=new q({props:{x:T+r[3]*w,y:U+r[1]*u,width:he,height:ge,text:`${r[0]._name}`,fontSize:16,color:"var(--main-color-2)"}}),o=new q({props:{x:k+r[3]*w,y:b+r[1]*u,width:p,height:p,text:`${r[0].data.toFixed(2)}`,fontSize:16,color:"var(--main-color-2)"}}),i=new q({props:{x:V+r[3]*w,y:Z+r[1]*u,width:p,height:p,text:`${r[0].grad.toFixed(2)}`,fontSize:16,color:"var(--main-color-1)"}});let _=r[0]._op&&J(r),F=r[0]._prev,m=[];for(let e=0;e<F.length;e+=1)m[e]=K(j(r,F,e));const le=e=>d(m[e],1,1,()=>{m[e]=null});return{c(){h&&h.c(),t=G(),W(f.$$.fragment),n=G(),W(o.$$.fragment),l=G(),W(i.$$.fragment),s=G(),_&&_.c(),g=G();for(let e=0;e<m.length;e+=1)m[e].c();v=P()},l(e){h&&h.l(e),t=M(e),z(f.$$.fragment,e),n=M(e),z(o.$$.fragment,e),l=M(e),z(i.$$.fragment,e),s=M(e),_&&_.l(e),g=M(e);for(let a=0;a<m.length;a+=1)m[a].l(e);v=P()},m(e,a){h&&h.m(e,a),D(e,t,a),N(f,e,a),D(e,n,a),N(o,e,a),D(e,l,a),N(i,e,a),D(e,s,a),_&&_.m(e,a),D(e,g,a);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(e,a);D(e,v,a),X=!0},p(e,[a]){e[1]!==0?h?(h.p(e,a),a&2&&$(h,1)):(h=I(e),h.c(),$(h,1),h.m(t.parentNode,t)):h&&(E(),d(h,1,1,()=>{h=null}),H());const S={};a&8&&(S.x=T+e[3]*w),a&2&&(S.y=U+e[1]*u),a&1&&(S.text=`${e[0]._name}`),f.$set(S);const Y={};a&8&&(Y.x=k+e[3]*w),a&2&&(Y.y=b+e[1]*u),a&1&&(Y.text=`${e[0].data.toFixed(2)}`),o.$set(Y);const O={};if(a&8&&(O.x=V+e[3]*w),a&2&&(O.y=Z+e[1]*u),a&1&&(O.text=`${e[0].grad.toFixed(2)}`),i.$set(O),e[0]._op?_?(_.p(e,a),a&1&&$(_,1)):(_=J(e),_.c(),$(_,1),_.m(g.parentNode,g)):_&&(E(),d(_,1,1,()=>{_=null}),H()),a&11){F=e[0]._prev;let c;for(c=0;c<F.length;c+=1){const L=j(e,F,c);m[c]?(m[c].p(L,a),$(m[c],1)):(m[c]=K(L),m[c].c(),$(m[c],1),m[c].m(v.parentNode,v))}for(E(),c=F.length;c<m.length;c+=1)le(c);H()}},i(e){if(!X){$(h),$(f.$$.fragment,e),$(o.$$.fragment,e),$(i.$$.fragment,e),$(_);for(let a=0;a<F.length;a+=1)$(m[a]);X=!0}},o(e){d(h),d(f.$$.fragment,e),d(o.$$.fragment,e),d(i.$$.fragment,e),d(_),m=m.filter(Boolean);for(let a=0;a<m.length;a+=1)d(m[a]);X=!1},d(e){h&&h.d(e),e&&C(t),A(f,e),e&&C(n),A(o,e),e&&C(l),A(i,e),e&&C(s),_&&_.d(e),e&&C(g),re(m,e),e&&C(v)}}}let ge=30,he=120,p=60,B=30,T=60,U=25,k=30,b=70,V=90,Z=70,u=200,w=150;function _e(r,t,f){let{root:n}=t,{level:o=0}=t,{parentColumn:l=0}=t,i=0,s=fe("levels");if(o in s?(s[o]+=1,i=s[o]):s[o]=0,o+1 in s){let g=s[o+1]+1;g>i&&(i=g,s[o]=i)}return r.$$set=g=>{"root"in g&&f(0,n=g.root),"level"in g&&f(1,o=g.level),"parentColumn"in g&&f(2,l=g.parentColumn)},[n,o,l,i]}class ne extends y{constructor(t){super(),x(this,t,_e,ue,ee,{root:0,level:1,parentColumn:2})}}function $e(r){let t,f,n,o;return f=new ne({props:{root:r[0]}}),{c(){t=ae("svg"),W(f.$$.fragment),this.h()},l(l){t=ie(l,"svg",{viewBox:!0});var i=se(t);z(f.$$.fragment,i),i.forEach(C),this.h()},h(){Q(t,"viewBox",n="0 0 "+r[1]+" "+r[2]),R(t,"border",r[4])},m(l,i){D(l,t,i),N(f,t,null),o=!0},p(l,i){const s={};i&1&&(s.root=l[0]),f.$set(s),(!o||i&6&&n!==(n="0 0 "+l[1]+" "+l[2]))&&Q(t,"viewBox",n),(!o||i&16)&&R(t,"border",l[4])},i(l){o||($(f.$$.fragment,l),o=!0)},o(l){d(f.$$.fragment,l),o=!1},d(l){l&&C(t),A(f)}}}function pe(r){let t,f;return t=new me({props:{maxWidth:`${r[3]}px`,$$slots:{default:[$e]},$$scope:{ctx:r}}}),{c(){W(t.$$.fragment)},l(n){z(t.$$.fragment,n)},m(n,o){N(t,n,o),f=!0},p(n,[o]){const l={};o&8&&(l.maxWidth=`${n[3]}px`),o&87&&(l.$$scope={dirty:o,ctx:n}),t.$set(l)},i(n){f||($(t.$$.fragment,n),f=!0)},o(n){d(t.$$.fragment,n),f=!1},d(n){A(t,n)}}}function ve(r,t,f){let{graph:n}=t,{width:o=500}=t,{height:l=500}=t,{maxWidth:i=500}=t,{debug:s=!1}=t;return oe("levels",{}),r.$$set=v=>{"graph"in v&&f(0,n=v.graph),"width"in v&&f(1,o=v.width),"height"in v&&f(2,l=v.height),"maxWidth"in v&&f(3,i=v.maxWidth),"debug"in v&&f(4,s=v.debug)},[n,o,l,i,s]}class be extends y{constructor(t){super(),x(this,t,ve,pe,ee,{graph:0,width:1,height:2,maxWidth:3,debug:4})}}export{be as B};
