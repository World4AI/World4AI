import{S as ct,i as ht,s as ut,k as L,a as j,y as B,W as gt,l as R,h as b,c as I,z as T,n as J,N as F,b as y,A as E,g as $,d as v,B as W,q as V,m as H,r as G,Q as oe,R as ae,v as z,f as P,P as N,e as A,C as U}from"../chunks/index.4d92b023.js";import{C as mt}from"../chunks/Container.b0705c7b.js";import{H as _t}from"../chunks/Highlight.b7c1de53.js";import{F as $t,I as pt}from"../chunks/InternalLink.7deb899c.js";import{S as re}from"../chunks/SvgContainer.f70b5745.js";import{B as M}from"../chunks/Block.059eddcd.js";import{A as Te}from"../chunks/Arrow.ae91874c.js";function Ee(i,n,a){const t=i.slice();return t[3]=n[a],t[5]=a,t}function We(i,n,a){const t=i.slice();return t[3]=n[a],t[7]=a,t}function ze(i,n,a){const t=i.slice();return t[3]=n[a],t[7]=a,t}function Pe(i,n,a){const t=i.slice();return t[3]=n[a],t[5]=a,t}function Ne(i,n,a){const t=i.slice();return t[3]=n[a],t[7]=a,t}function Se(i,n,a){const t=i.slice();return t[3]=n[a],t[5]=a,t}function je(i,n,a){const t=i.slice();return t[3]=n[a],t[7]=a,t}function Ie(i,n,a){const t=i.slice();return t[3]=n[a],t[7]=a,t}function Fe(i,n,a){const t=i.slice();return t[3]=n[a],t[5]=a,t}function De(i,n,a){const t=i.slice();return t[3]=n[a],t[7]=a,t}function He(i,n,a){const t=i.slice();return t[3]=n[a],t[5]=a,t}function Me(i,n,a){const t=i.slice();return t[3]=n[a],t[7]=a,t}function Ce(i,n,a){const t=i.slice();return t[3]=n[a],t[5]=a,t}function qe(i,n,a){const t=i.slice();return t[3]=n[a],t[7]=a,t}function Le(i,n,a){const t=i.slice();return t[3]=n[a],t[21]=a,t}function Re(i,n,a){const t=i.slice();return t[3]=n[a],t[7]=a,t}function Ve(i,n,a){const t=i.slice();return t[3]=n[a],t[21]=a,t}function Ge(i,n,a){const t=i.slice();return t[3]=n[a],t[7]=a,t}function dt(i){let n;return{c(){n=V("vision transformer")},l(a){n=G(a,"vision transformer")},m(a,t){y(a,n,t)},d(a){a&&b(n)}}}function Ue(i){let n,a;return n=new M({props:{x:5+p/2+i[21]*(p+2),y:5+p/2+i[7]*(p+2),width:p,height:p,class:"fill-gray-200"}}),{c(){B(n.$$.fragment)},l(t){T(n.$$.fragment,t)},m(t,l){E(n,t,l),a=!0},p:U,i(t){a||($(n.$$.fragment,t),a=!0)},o(t){v(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}function Je(i){let n,a,t=Array(D),l=[];for(let o=0;o<t.length;o+=1)l[o]=Ue(Ge(i,t,o));const s=o=>v(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();n=A()},l(o){for(let e=0;e<l.length;e+=1)l[e].l(o);n=A()},m(o,e){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,e);y(o,n,e),a=!0},p(o,e){if(e&0){t=Array(D);let r;for(r=0;r<t.length;r+=1){const f=Ge(o,t,r);l[r]?(l[r].p(f,e),$(l[r],1)):(l[r]=Ue(f),l[r].c(),$(l[r],1),l[r].m(n.parentNode,n))}for(z(),r=t.length;r<l.length;r+=1)s(r);P()}},i(o){if(!a){for(let e=0;e<t.length;e+=1)$(l[e]);a=!0}},o(o){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)v(l[e]);a=!1},d(o){N(l,o),o&&b(n)}}}function vt(i){let n,a,t=Array(S),l=[];for(let o=0;o<t.length;o+=1)l[o]=Je(Ve(i,t,o));const s=o=>v(l[o],1,1,()=>{l[o]=null});return{c(){n=oe("svg");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){n=ae(o,"svg",{viewBox:!0});var e=H(n);for(let r=0;r<l.length;r+=1)l[r].l(e);e.forEach(b),this.h()},h(){J(n,"viewBox","0 0 100 100")},m(o,e){y(o,n,e);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(n,null);a=!0},p(o,e){if(e&0){t=Array(S);let r;for(r=0;r<t.length;r+=1){const f=Ve(o,t,r);l[r]?(l[r].p(f,e),$(l[r],1)):(l[r]=Je(f),l[r].c(),$(l[r],1),l[r].m(n,null))}for(z(),r=t.length;r<l.length;r+=1)s(r);P()}},i(o){if(!a){for(let e=0;e<t.length;e+=1)$(l[e]);a=!0}},o(o){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)v(l[e]);a=!1},d(o){o&&b(n),N(l,o)}}}function Ke(i){let n,a;return n=new M({props:{x:5+p/2+i[21]*(p+2),y:5+p/2+i[7]*(p+2),width:p,height:p,class:i[1][Math.floor(i[21]/w)+Math.floor(i[7]/w)*S/w]}}),{c(){B(n.$$.fragment)},l(t){T(n.$$.fragment,t)},m(t,l){E(n,t,l),a=!0},p:U,i(t){a||($(n.$$.fragment,t),a=!0)},o(t){v(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}function Qe(i){let n,a,t=Array(D),l=[];for(let o=0;o<t.length;o+=1)l[o]=Ke(Re(i,t,o));const s=o=>v(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();n=A()},l(o){for(let e=0;e<l.length;e+=1)l[e].l(o);n=A()},m(o,e){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,e);y(o,n,e),a=!0},p(o,e){if(e&2){t=Array(D);let r;for(r=0;r<t.length;r+=1){const f=Re(o,t,r);l[r]?(l[r].p(f,e),$(l[r],1)):(l[r]=Ke(f),l[r].c(),$(l[r],1),l[r].m(n.parentNode,n))}for(z(),r=t.length;r<l.length;r+=1)s(r);P()}},i(o){if(!a){for(let e=0;e<t.length;e+=1)$(l[e]);a=!0}},o(o){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)v(l[e]);a=!1},d(o){N(l,o),o&&b(n)}}}function wt(i){let n,a,t=Array(S),l=[];for(let o=0;o<t.length;o+=1)l[o]=Qe(Le(i,t,o));const s=o=>v(l[o],1,1,()=>{l[o]=null});return{c(){n=oe("svg");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){n=ae(o,"svg",{viewBox:!0});var e=H(n);for(let r=0;r<l.length;r+=1)l[r].l(e);e.forEach(b),this.h()},h(){J(n,"viewBox","0 0 100 100")},m(o,e){y(o,n,e);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(n,null);a=!0},p(o,e){if(e&2){t=Array(S);let r;for(r=0;r<t.length;r+=1){const f=Le(o,t,r);l[r]?(l[r].p(f,e),$(l[r],1)):(l[r]=Qe(f),l[r].c(),$(l[r],1),l[r].m(n,null))}for(z(),r=t.length;r<l.length;r+=1)s(r);P()}},i(o){if(!a){for(let e=0;e<t.length;e+=1)$(l[e]);a=!0}},o(o){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)v(l[e]);a=!1},d(o){o&&b(n),N(l,o)}}}function Xe(i){let n,a;return n=new M({props:{x:5+p/2+i[5]*(p+37),y:5+p/2+i[7]*(p+2),width:p,height:p,class:i[1][i[5]]}}),{c(){B(n.$$.fragment)},l(t){T(n.$$.fragment,t)},m(t,l){E(n,t,l),a=!0},p:U,i(t){a||($(n.$$.fragment,t),a=!0)},o(t){v(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}function Ze(i){let n,a,t=Array(w*w),l=[];for(let o=0;o<t.length;o+=1)l[o]=Xe(qe(i,t,o));const s=o=>v(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();n=A()},l(o){for(let e=0;e<l.length;e+=1)l[e].l(o);n=A()},m(o,e){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,e);y(o,n,e),a=!0},p(o,e){if(e&2){t=Array(w*w);let r;for(r=0;r<t.length;r+=1){const f=qe(o,t,r);l[r]?(l[r].p(f,e),$(l[r],1)):(l[r]=Xe(f),l[r].c(),$(l[r],1),l[r].m(n.parentNode,n))}for(z(),r=t.length;r<l.length;r+=1)s(r);P()}},i(o){if(!a){for(let e=0;e<t.length;e+=1)$(l[e]);a=!0}},o(o){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)v(l[e]);a=!1},d(o){N(l,o),o&&b(n)}}}function bt(i){let n,a,t=Array(S*D/(w*w)),l=[];for(let o=0;o<t.length;o+=1)l[o]=Ze(Ce(i,t,o));const s=o=>v(l[o],1,1,()=>{l[o]=null});return{c(){n=oe("svg");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){n=ae(o,"svg",{viewBox:!0});var e=H(n);for(let r=0;r<l.length;r+=1)l[r].l(e);e.forEach(b),this.h()},h(){J(n,"viewBox","0 0 200 100")},m(o,e){y(o,n,e);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(n,null);a=!0},p(o,e){if(e&2){t=Array(S*D/(w*w));let r;for(r=0;r<t.length;r+=1){const f=Ce(o,t,r);l[r]?(l[r].p(f,e),$(l[r],1)):(l[r]=Ze(f),l[r].c(),$(l[r],1),l[r].m(n,null))}for(z(),r=t.length;r<l.length;r+=1)s(r);P()}},i(o){if(!a){for(let e=0;e<t.length;e+=1)$(l[e]);a=!0}},o(o){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)v(l[e]);a=!1},d(o){o&&b(n),N(l,o)}}}function Oe(i){let n,a;return n=new M({props:{x:5+p/2+(i[5]+1)*(p+37),y:5+p/2+i[7]*(p+2),width:p,height:p,class:i[1][i[5]]}}),{c(){B(n.$$.fragment)},l(t){T(n.$$.fragment,t)},m(t,l){E(n,t,l),a=!0},p:U,i(t){a||($(n.$$.fragment,t),a=!0)},o(t){v(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}function Ye(i){let n,a,t=Array(w*w),l=[];for(let o=0;o<t.length;o+=1)l[o]=Oe(Me(i,t,o));const s=o=>v(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();n=A()},l(o){for(let e=0;e<l.length;e+=1)l[e].l(o);n=A()},m(o,e){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,e);y(o,n,e),a=!0},p(o,e){if(e&2){t=Array(w*w);let r;for(r=0;r<t.length;r+=1){const f=Me(o,t,r);l[r]?(l[r].p(f,e),$(l[r],1)):(l[r]=Oe(f),l[r].c(),$(l[r],1),l[r].m(n.parentNode,n))}for(z(),r=t.length;r<l.length;r+=1)s(r);P()}},i(o){if(!a){for(let e=0;e<t.length;e+=1)$(l[e]);a=!0}},o(o){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)v(l[e]);a=!1},d(o){N(l,o),o&&b(n)}}}function et(i){let n,a;return n=new M({props:{x:5+p/2+(i[5]+1)*(p+37),y:155+p/2+i[7]*(p+2),width:p,height:p,class:i[1][i[5]]}}),{c(){B(n.$$.fragment)},l(t){T(n.$$.fragment,t)},m(t,l){E(n,t,l),a=!0},p:U,i(t){a||($(n.$$.fragment,t),a=!0)},o(t){v(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}function tt(i){let n,a,t;n=new Te({props:{data:[{x:5+p/2+(i[5]+1)*(p+37),y:140+p/2},{x:5+p/2+(i[5]+1)*(p+37),y:90+p/2}],strokeWidth:1.5,strokeDashArray:"4 4",dashed:!0,moving:!0}});let l=Array(w*w),s=[];for(let e=0;e<l.length;e+=1)s[e]=et(De(i,l,e));const o=e=>v(s[e],1,1,()=>{s[e]=null});return{c(){B(n.$$.fragment);for(let e=0;e<s.length;e+=1)s[e].c();a=A()},l(e){T(n.$$.fragment,e);for(let r=0;r<s.length;r+=1)s[r].l(e);a=A()},m(e,r){E(n,e,r);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,r);y(e,a,r),t=!0},p(e,r){if(r&2){l=Array(w*w);let f;for(f=0;f<l.length;f+=1){const g=De(e,l,f);s[f]?(s[f].p(g,r),$(s[f],1)):(s[f]=et(g),s[f].c(),$(s[f],1),s[f].m(a.parentNode,a))}for(z(),f=l.length;f<s.length;f+=1)o(f);P()}},i(e){if(!t){$(n.$$.fragment,e);for(let r=0;r<l.length;r+=1)$(s[r]);t=!0}},o(e){v(n.$$.fragment,e),s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)v(s[r]);t=!1},d(e){W(n,e),N(s,e),e&&b(a)}}}function lt(i){let n,a;return n=new M({props:{x:5+p/2,y:5+p/2+i[7]*(p+2),width:p,height:p,class:"fill-white"}}),{c(){B(n.$$.fragment)},l(t){T(n.$$.fragment,t)},m(t,l){E(n,t,l),a=!0},p:U,i(t){a||($(n.$$.fragment,t),a=!0)},o(t){v(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}function xt(i){let n,a,t,l,s,o=Array(S*D/(w*w)),e=[];for(let d=0;d<o.length;d+=1)e[d]=Ye(He(i,o,d));const r=d=>v(e[d],1,1,()=>{e[d]=null});let f=Array(S*D/(w*w)),g=[];for(let d=0;d<f.length;d+=1)g[d]=tt(Fe(i,f,d));const q=d=>v(g[d],1,1,()=>{g[d]=null});l=new M({props:{x:160,y:120,width:190,height:p,text:"Linear Projection",fontSize:12,class:"fill-white"}});let u=Array(w*w),m=[];for(let d=0;d<u.length;d+=1)m[d]=lt(Ie(i,u,d));const h=d=>v(m[d],1,1,()=>{m[d]=null});return{c(){n=oe("svg");for(let d=0;d<e.length;d+=1)e[d].c();a=A();for(let d=0;d<g.length;d+=1)g[d].c();t=A(),B(l.$$.fragment);for(let d=0;d<m.length;d+=1)m[d].c();this.h()},l(d){n=ae(d,"svg",{viewBox:!0});var k=H(n);for(let _=0;_<e.length;_+=1)e[_].l(k);a=A();for(let _=0;_<g.length;_+=1)g[_].l(k);t=A(),T(l.$$.fragment,k);for(let _=0;_<m.length;_+=1)m[_].l(k);k.forEach(b),this.h()},h(){J(n,"viewBox","0 0 260 250")},m(d,k){y(d,n,k);for(let _=0;_<e.length;_+=1)e[_]&&e[_].m(n,null);F(n,a);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(n,null);F(n,t),E(l,n,null);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(n,null);s=!0},p(d,k){if(k&2){o=Array(S*D/(w*w));let _;for(_=0;_<o.length;_+=1){const C=He(d,o,_);e[_]?(e[_].p(C,k),$(e[_],1)):(e[_]=Ye(C),e[_].c(),$(e[_],1),e[_].m(n,a))}for(z(),_=o.length;_<e.length;_+=1)r(_);P()}if(k&2){f=Array(S*D/(w*w));let _;for(_=0;_<f.length;_+=1){const C=Fe(d,f,_);g[_]?(g[_].p(C,k),$(g[_],1)):(g[_]=tt(C),g[_].c(),$(g[_],1),g[_].m(n,t))}for(z(),_=f.length;_<g.length;_+=1)q(_);P()}if(k&0){u=Array(w*w);let _;for(_=0;_<u.length;_+=1){const C=Ie(d,u,_);m[_]?(m[_].p(C,k),$(m[_],1)):(m[_]=lt(C),m[_].c(),$(m[_],1),m[_].m(n,null))}for(z(),_=u.length;_<m.length;_+=1)h(_);P()}},i(d){if(!s){for(let k=0;k<o.length;k+=1)$(e[k]);for(let k=0;k<f.length;k+=1)$(g[k]);$(l.$$.fragment,d);for(let k=0;k<u.length;k+=1)$(m[k]);s=!0}},o(d){e=e.filter(Boolean);for(let k=0;k<e.length;k+=1)v(e[k]);g=g.filter(Boolean);for(let k=0;k<g.length;k+=1)v(g[k]);v(l.$$.fragment,d),m=m.filter(Boolean);for(let k=0;k<m.length;k+=1)v(m[k]);s=!1},d(d){d&&b(n),N(e,d),N(g,d),W(l),N(m,d)}}}function nt(i){let n,a;return n=new M({props:{x:5+p/2+i[5]*(p+37),y:5+p/2+i[7]*(p+2),width:p,height:p,class:i[2][i[5]]}}),{c(){B(n.$$.fragment)},l(t){T(n.$$.fragment,t)},m(t,l){E(n,t,l),a=!0},p:U,i(t){a||($(n.$$.fragment,t),a=!0)},o(t){v(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}function rt(i){let n,a,t=Array(w*w),l=[];for(let o=0;o<t.length;o+=1)l[o]=nt(je(i,t,o));const s=o=>v(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();n=A()},l(o){for(let e=0;e<l.length;e+=1)l[e].l(o);n=A()},m(o,e){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,e);y(o,n,e),a=!0},p(o,e){if(e&4){t=Array(w*w);let r;for(r=0;r<t.length;r+=1){const f=je(o,t,r);l[r]?(l[r].p(f,e),$(l[r],1)):(l[r]=nt(f),l[r].c(),$(l[r],1),l[r].m(n.parentNode,n))}for(z(),r=t.length;r<l.length;r+=1)s(r);P()}},i(o){if(!a){for(let e=0;e<t.length;e+=1)$(l[e]);a=!0}},o(o){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)v(l[e]);a=!1},d(o){N(l,o),o&&b(n)}}}function ot(i){let n,a;return n=new M({props:{x:5+p/2+i[5]*(p+37),y:155+p/2+i[7]*(p+2),width:p,height:p,class:i[2][i[5]]}}),{c(){B(n.$$.fragment)},l(t){T(n.$$.fragment,t)},m(t,l){E(n,t,l),a=!0},p:U,i(t){a||($(n.$$.fragment,t),a=!0)},o(t){v(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}function at(i){let n,a,t;n=new Te({props:{data:[{x:5+p/2+i[5]*(p+37),y:140+p/2},{x:5+p/2+i[5]*(p+37),y:90+p/2}],strokeWidth:1.5,strokeDashArray:"4 4",dashed:!0,moving:!0}});let l=Array(w*w),s=[];for(let e=0;e<l.length;e+=1)s[e]=ot(Ne(i,l,e));const o=e=>v(s[e],1,1,()=>{s[e]=null});return{c(){B(n.$$.fragment);for(let e=0;e<s.length;e+=1)s[e].c();a=A()},l(e){T(n.$$.fragment,e);for(let r=0;r<s.length;r+=1)s[r].l(e);a=A()},m(e,r){E(n,e,r);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,r);y(e,a,r),t=!0},p(e,r){if(r&4){l=Array(w*w);let f;for(f=0;f<l.length;f+=1){const g=Ne(e,l,f);s[f]?(s[f].p(g,r),$(s[f],1)):(s[f]=ot(g),s[f].c(),$(s[f],1),s[f].m(a.parentNode,a))}for(z(),f=l.length;f<s.length;f+=1)o(f);P()}},i(e){if(!t){$(n.$$.fragment,e);for(let r=0;r<l.length;r+=1)$(s[r]);t=!0}},o(e){v(n.$$.fragment,e),s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)v(s[r]);t=!1},d(e){W(n,e),N(s,e),e&&b(a)}}}function kt(i){let n,a,t,l,s,o=Array(S*D/(w*w)+1),e=[];for(let u=0;u<o.length;u+=1)e[u]=rt(Se(i,o,u));const r=u=>v(e[u],1,1,()=>{e[u]=null});let f=Array(S*D/(w*w)+1),g=[];for(let u=0;u<f.length;u+=1)g[u]=at(Pe(i,f,u));const q=u=>v(g[u],1,1,()=>{g[u]=null});return l=new M({props:{x:128,y:120,width:250,height:p,text:"Add Positional Embedding",fontSize:12,class:"fill-white"}}),{c(){n=oe("svg");for(let u=0;u<e.length;u+=1)e[u].c();a=A();for(let u=0;u<g.length;u+=1)g[u].c();t=A(),B(l.$$.fragment),this.h()},l(u){n=ae(u,"svg",{viewBox:!0});var m=H(n);for(let h=0;h<e.length;h+=1)e[h].l(m);a=A();for(let h=0;h<g.length;h+=1)g[h].l(m);t=A(),T(l.$$.fragment,m),m.forEach(b),this.h()},h(){J(n,"viewBox","0 0 260 250")},m(u,m){y(u,n,m);for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(n,null);F(n,a);for(let h=0;h<g.length;h+=1)g[h]&&g[h].m(n,null);F(n,t),E(l,n,null),s=!0},p(u,m){if(m&4){o=Array(S*D/(w*w)+1);let h;for(h=0;h<o.length;h+=1){const d=Se(u,o,h);e[h]?(e[h].p(d,m),$(e[h],1)):(e[h]=rt(d),e[h].c(),$(e[h],1),e[h].m(n,a))}for(z(),h=o.length;h<e.length;h+=1)r(h);P()}if(m&4){f=Array(S*D/(w*w)+1);let h;for(h=0;h<f.length;h+=1){const d=Pe(u,f,h);g[h]?(g[h].p(d,m),$(g[h],1)):(g[h]=at(d),g[h].c(),$(g[h],1),g[h].m(n,t))}for(z(),h=f.length;h<g.length;h+=1)q(h);P()}},i(u){if(!s){for(let m=0;m<o.length;m+=1)$(e[m]);for(let m=0;m<f.length;m+=1)$(g[m]);$(l.$$.fragment,u),s=!0}},o(u){e=e.filter(Boolean);for(let m=0;m<e.length;m+=1)v(e[m]);g=g.filter(Boolean);for(let m=0;m<g.length;m+=1)v(g[m]);v(l.$$.fragment,u),s=!1},d(u){u&&b(n),N(e,u),N(g,u),W(l)}}}function it(i){let n,a;return n=new M({props:{x:5+p/2,y:5+p/2+i[7]*(p+2),width:p,height:p,class:"fill-white"}}),{c(){B(n.$$.fragment)},l(t){T(n.$$.fragment,t)},m(t,l){E(n,t,l),a=!0},p:U,i(t){a||($(n.$$.fragment,t),a=!0)},o(t){v(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}function ft(i){let n,a;return n=new M({props:{x:5+p/2+i[5]*(p+37),y:155+p/2+i[7]*(p+2),width:p,height:p,class:i[2][i[5]]}}),{c(){B(n.$$.fragment)},l(t){T(n.$$.fragment,t)},m(t,l){E(n,t,l),a=!0},p:U,i(t){a||($(n.$$.fragment,t),a=!0)},o(t){v(n.$$.fragment,t),a=!1},d(t){W(n,t)}}}function st(i){let n,a,t;n=new Te({props:{data:[{x:5+p/2+i[5]*(p+37),y:140+p/2},{x:5+p/2+i[5]*(p+37),y:90+p/2}],strokeWidth:1.5,strokeDashArray:"4 4",dashed:!0,moving:!0}});let l=Array(w*w),s=[];for(let e=0;e<l.length;e+=1)s[e]=ft(We(i,l,e));const o=e=>v(s[e],1,1,()=>{s[e]=null});return{c(){B(n.$$.fragment);for(let e=0;e<s.length;e+=1)s[e].c();a=A()},l(e){T(n.$$.fragment,e);for(let r=0;r<s.length;r+=1)s[r].l(e);a=A()},m(e,r){E(n,e,r);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,r);y(e,a,r),t=!0},p(e,r){if(r&4){l=Array(w*w);let f;for(f=0;f<l.length;f+=1){const g=We(e,l,f);s[f]?(s[f].p(g,r),$(s[f],1)):(s[f]=ft(g),s[f].c(),$(s[f],1),s[f].m(a.parentNode,a))}for(z(),f=l.length;f<s.length;f+=1)o(f);P()}},i(e){if(!t){$(n.$$.fragment,e);for(let r=0;r<l.length;r+=1)$(s[r]);t=!0}},o(e){v(n.$$.fragment,e),s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)v(s[r]);t=!1},d(e){W(n,e),N(s,e),e&&b(a)}}}function yt(i){let n,a,t,l,s,o=Array(w*w),e=[];for(let u=0;u<o.length;u+=1)e[u]=it(ze(i,o,u));const r=u=>v(e[u],1,1,()=>{e[u]=null});let f=Array(S*D/(w*w)+1),g=[];for(let u=0;u<f.length;u+=1)g[u]=st(Ee(i,f,u));const q=u=>v(g[u],1,1,()=>{g[u]=null});return l=new M({props:{x:128,y:120,width:250,height:p,text:"Encoder Layers",fontSize:12,class:"fill-white"}}),{c(){n=oe("svg");for(let u=0;u<e.length;u+=1)e[u].c();a=A();for(let u=0;u<g.length;u+=1)g[u].c();t=A(),B(l.$$.fragment),this.h()},l(u){n=ae(u,"svg",{viewBox:!0});var m=H(n);for(let h=0;h<e.length;h+=1)e[h].l(m);a=A();for(let h=0;h<g.length;h+=1)g[h].l(m);t=A(),T(l.$$.fragment,m),m.forEach(b),this.h()},h(){J(n,"viewBox","0 0 260 250")},m(u,m){y(u,n,m);for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(n,null);F(n,a);for(let h=0;h<g.length;h+=1)g[h]&&g[h].m(n,null);F(n,t),E(l,n,null),s=!0},p(u,m){if(m&0){o=Array(w*w);let h;for(h=0;h<o.length;h+=1){const d=ze(u,o,h);e[h]?(e[h].p(d,m),$(e[h],1)):(e[h]=it(d),e[h].c(),$(e[h],1),e[h].m(n,a))}for(z(),h=o.length;h<e.length;h+=1)r(h);P()}if(m&4){f=Array(S*D/(w*w)+1);let h;for(h=0;h<f.length;h+=1){const d=Ee(u,f,h);g[h]?(g[h].p(d,m),$(g[h],1)):(g[h]=st(d),g[h].c(),$(g[h],1),g[h].m(n,t))}for(z(),h=f.length;h<g.length;h+=1)q(h);P()}},i(u){if(!s){for(let m=0;m<o.length;m+=1)$(e[m]);for(let m=0;m<f.length;m+=1)$(g[m]);$(l.$$.fragment,u),s=!0}},o(u){e=e.filter(Boolean);for(let m=0;m<e.length;m+=1)v(e[m]);g=g.filter(Boolean);for(let m=0;m<g.length;m+=1)v(g[m]);v(l.$$.fragment,u),s=!1},d(u){u&&b(n),N(e,u),N(g,u),W(l)}}}function At(i){let n,a,t,l,s,o,e,r,f,g,q,u,m,h,d,k,_,C,ge,K,me,ee,ke,_e,Q,$e,te,ye,pe,X,de,le,Ae,ve,Z,we,ne,Be,be,O,xe;return r=new _t({props:{$$slots:{default:[dt]},$$scope:{ctx:i}}}),f=new pt({props:{id:1,type:"reference"}}),d=new re({props:{maxWidth:"200px",$$slots:{default:[vt]},$$scope:{ctx:i}}}),K=new re({props:{maxWidth:"200px",$$slots:{default:[wt]},$$scope:{ctx:i}}}),Q=new re({props:{maxWidth:"300px",$$slots:{default:[bt]},$$scope:{ctx:i}}}),X=new re({props:{maxWidth:"400px",$$slots:{default:[xt]},$$scope:{ctx:i}}}),Z=new re({props:{maxWidth:"400px",$$slots:{default:[kt]},$$scope:{ctx:i}}}),O=new re({props:{maxWidth:"400px",$$slots:{default:[yt]},$$scope:{ctx:i}}}),{c(){n=L("h1"),a=V("Vision Transformer"),t=j(),l=L("div"),s=j(),o=L("p"),e=V(`We have mentioned before that the transformer has become the swiss army
    knive for the deep learning community. This transformer has a general
    purpose architecture that can be applied to many modalities. In this section
    we will discuss how we can use layers of transformer encoders for computer
    vision, the so called `),B(r.$$.fragment),B(f.$$.fragment),g=V("."),q=j(),u=L("p"),m=V(`For the sake of explanation let's assume that we are dealing with images of
    size 4x4 pixels.`),h=j(),B(d.$$.fragment),k=j(),_=L("p"),C=V(`The naive approach would be to allow each pixels to attend to each other
    pixel in the image, but the computational cost for the calculation of
    attention would explode when the size of the image increases. Instead we
    divide the image into quadratic patches. For our small example we could
    create patches of size 2x2.`),ge=j(),B(K.$$.fragment),me=j(),ee=L("p"),ke=V(`Remember that the transformer expects vector embeddings as inputs. To
    achieve that we first flatten the patches.`),_e=j(),B(Q.$$.fragment),$e=j(),te=L("p"),ye=V(`Next we project the flattened patches linearly, by running each individual
    vector through the same linear layer using the same weights and bias. This
    result can be compared to the token embeddings in the traditional
    transformer. We additionally create a separate learnable embedding (vector
    on the left in the image below). This embedding corresponds to the
    classification token and will be used at a later stage to classify our
    images.`),pe=j(),B(X.$$.fragment),de=j(),le=L("p"),Ae=V(`At this point our model can not differentiate between the different
    positions of the vectors in the image. Therefore we create positional
    embeddings and add those to linear projections.`),ve=j(),B(Z.$$.fragment),we=j(),ne=L("p"),Be=V(`Finally we pass those embeddings through layers of encoders and allow each
    embedding to attend to each other embedding. At the output layer we ignore
    all vectors, except the one corresponding to the classification token. This
    token is used as the input to a fully connected layer and we train the whole
    network jointly on a classification task.`),be=j(),B(O.$$.fragment),this.h()},l(c){n=R(c,"H1",{});var x=H(n);a=G(x,"Vision Transformer"),x.forEach(b),t=I(c),l=R(c,"DIV",{class:!0}),H(l).forEach(b),s=I(c),o=R(c,"P",{});var Y=H(o);e=G(Y,`We have mentioned before that the transformer has become the swiss army
    knive for the deep learning community. This transformer has a general
    purpose architecture that can be applied to many modalities. In this section
    we will discuss how we can use layers of transformer encoders for computer
    vision, the so called `),T(r.$$.fragment,Y),T(f.$$.fragment,Y),g=G(Y,"."),Y.forEach(b),q=I(c),u=R(c,"P",{});var ie=H(u);m=G(ie,`For the sake of explanation let's assume that we are dealing with images of
    size 4x4 pixels.`),ie.forEach(b),h=I(c),T(d.$$.fragment,c),k=I(c),_=R(c,"P",{});var fe=H(_);C=G(fe,`The naive approach would be to allow each pixels to attend to each other
    pixel in the image, but the computational cost for the calculation of
    attention would explode when the size of the image increases. Instead we
    divide the image into quadratic patches. For our small example we could
    create patches of size 2x2.`),fe.forEach(b),ge=I(c),T(K.$$.fragment,c),me=I(c),ee=R(c,"P",{});var se=H(ee);ke=G(se,`Remember that the transformer expects vector embeddings as inputs. To
    achieve that we first flatten the patches.`),se.forEach(b),_e=I(c),T(Q.$$.fragment,c),$e=I(c),te=R(c,"P",{});var ce=H(te);ye=G(ce,`Next we project the flattened patches linearly, by running each individual
    vector through the same linear layer using the same weights and bias. This
    result can be compared to the token embeddings in the traditional
    transformer. We additionally create a separate learnable embedding (vector
    on the left in the image below). This embedding corresponds to the
    classification token and will be used at a later stage to classify our
    images.`),ce.forEach(b),pe=I(c),T(X.$$.fragment,c),de=I(c),le=R(c,"P",{});var he=H(le);Ae=G(he,`At this point our model can not differentiate between the different
    positions of the vectors in the image. Therefore we create positional
    embeddings and add those to linear projections.`),he.forEach(b),ve=I(c),T(Z.$$.fragment,c),we=I(c),ne=R(c,"P",{});var ue=H(ne);Be=G(ue,`Finally we pass those embeddings through layers of encoders and allow each
    embedding to attend to each other embedding. At the output layer we ignore
    all vectors, except the one corresponding to the classification token. This
    token is used as the input to a fully connected layer and we train the whole
    network jointly on a classification task.`),ue.forEach(b),be=I(c),T(O.$$.fragment,c),this.h()},h(){J(l,"class","separator")},m(c,x){y(c,n,x),F(n,a),y(c,t,x),y(c,l,x),y(c,s,x),y(c,o,x),F(o,e),E(r,o,null),E(f,o,null),F(o,g),y(c,q,x),y(c,u,x),F(u,m),y(c,h,x),E(d,c,x),y(c,k,x),y(c,_,x),F(_,C),y(c,ge,x),E(K,c,x),y(c,me,x),y(c,ee,x),F(ee,ke),y(c,_e,x),E(Q,c,x),y(c,$e,x),y(c,te,x),F(te,ye),y(c,pe,x),E(X,c,x),y(c,de,x),y(c,le,x),F(le,Ae),y(c,ve,x),E(Z,c,x),y(c,we,x),y(c,ne,x),F(ne,Be),y(c,be,x),E(O,c,x),xe=!0},p(c,x){const Y={};x&33554432&&(Y.$$scope={dirty:x,ctx:c}),r.$set(Y);const ie={};x&33554432&&(ie.$$scope={dirty:x,ctx:c}),d.$set(ie);const fe={};x&33554432&&(fe.$$scope={dirty:x,ctx:c}),K.$set(fe);const se={};x&33554432&&(se.$$scope={dirty:x,ctx:c}),Q.$set(se);const ce={};x&33554432&&(ce.$$scope={dirty:x,ctx:c}),X.$set(ce);const he={};x&33554432&&(he.$$scope={dirty:x,ctx:c}),Z.$set(he);const ue={};x&33554432&&(ue.$$scope={dirty:x,ctx:c}),O.$set(ue)},i(c){xe||($(r.$$.fragment,c),$(f.$$.fragment,c),$(d.$$.fragment,c),$(K.$$.fragment,c),$(Q.$$.fragment,c),$(X.$$.fragment,c),$(Z.$$.fragment,c),$(O.$$.fragment,c),xe=!0)},o(c){v(r.$$.fragment,c),v(f.$$.fragment,c),v(d.$$.fragment,c),v(K.$$.fragment,c),v(Q.$$.fragment,c),v(X.$$.fragment,c),v(Z.$$.fragment,c),v(O.$$.fragment,c),xe=!1},d(c){c&&b(n),c&&b(t),c&&b(l),c&&b(s),c&&b(o),W(r),W(f),c&&b(q),c&&b(u),c&&b(h),W(d,c),c&&b(k),c&&b(_),c&&b(ge),W(K,c),c&&b(me),c&&b(ee),c&&b(_e),W(Q,c),c&&b($e),c&&b(te),c&&b(pe),W(X,c),c&&b(de),c&&b(le),c&&b(ve),W(Z,c),c&&b(we),c&&b(ne),c&&b(be),W(O,c)}}}function Bt(i){let n,a,t,l,s,o;return t=new mt({props:{$$slots:{default:[At]},$$scope:{ctx:i}}}),s=new $t({props:{references:i[0]}}),{c(){n=L("meta"),a=j(),B(t.$$.fragment),l=j(),B(s.$$.fragment),this.h()},l(e){const r=gt("svelte-1a4ff3n",document.head);n=R(r,"META",{name:!0,content:!0}),r.forEach(b),a=I(e),T(t.$$.fragment,e),l=I(e),T(s.$$.fragment,e),this.h()},h(){document.title="Vision Transformer - World4AI",J(n,"name","description"),J(n,"content","A vision transformer is an encoder based computer vision architecture, that processes patches of pixels in parallel.")},m(e,r){F(document.head,n),y(e,a,r),E(t,e,r),y(e,l,r),E(s,e,r),o=!0},p(e,[r]){const f={};r&33554432&&(f.$$scope={dirty:r,ctx:e}),t.$set(f)},i(e){o||($(t.$$.fragment,e),$(s.$$.fragment,e),o=!0)},o(e){v(t.$$.fragment,e),v(s.$$.fragment,e),o=!1},d(e){b(n),e&&b(a),W(t,e),e&&b(l),W(s,e)}}}const S=4,D=4,p=20,w=2;function Tt(i){return[[{author:"Alexander Kolesnikov and Alexey Dosovitskiy and Dirk Weissenborn and Georg Heigold and Jakob Uszkoreit and Lucas Beyer and Matthias Minderer and Mostafa Dehghani and Neil Houlsby and Sylvain Gelly and Thomas Unterthiner and Xiaohua Zhai",title:"An Image is Worth 16x16 Words: Transformers for Image Recognition at Scale",journal:"",year:"2021",pages:"",volume:"",issue:""}],["fill-red-100","fill-blue-100","fill-yellow-100","fill-green-100"],["fill-white","fill-red-100","fill-blue-100","fill-yellow-100","fill-green-100"]]}class It extends ct{constructor(n){super(),ht(this,n,Tt,Bt,ut,{})}}export{It as default};
